
DROP TABLE "DOFER"."ISSUE" cascade constraints;
DROP TABLE "DOFER"."USERS_LIST" cascade constraints;
DROP TABLE "DOFER"."ISSUE_TO_USERS" cascade constraints;

DROP TABLE "DOFER"."TASKMAIN" cascade constraints;
DROP TABLE "DOFER"."MATCHEDTASKS" cascade constraints;
DROP TABLE "DOFER"."TASKMAIN_TO_USER" cascade constraints;
DROP TABLE "DOFER"."USER" cascade constraints;
DROP TABLE "DOFER"."USERFORAUTH" cascade constraints;

--------------------------------------------------------
--  DDL for Table USERFORAUTH
--------------------------------------------------------
create table "DOFER"."USERFORAUTH" (
  USER_ID number,
  USER_LOGIN varchar2(20),
  USER_PINCODE varchar2(20),
  constraint users_pk primary key (USER_ID)  
);
--------------------------------------------------------
--  DDL for Table TASKMAIN
--------------------------------------------------------

  CREATE TABLE "DOFER"."TASKMAIN" 
   (	"TK_TABLEID" number,
  "TK_TASKID" VARCHAR2(20 BYTE),
	"TK_SUMMARY" VARCHAR2(255 BYTE), 
	"TK_DESCRIPTION" VARCHAR2(1000 BYTE), 
	"TK_SUB_TYPE" VARCHAR2(30 BYTE), 
	"TK_STATUS" VARCHAR2(30 BYTE), 
	"TK_PRIORITY" VARCHAR2(30 BYTE), 
	"TK_PRODUCT" VARCHAR2(30 BYTE), 
	"TK_PROJECT" VARCHAR2(30 BYTE), 
	"TK_CR_DATE" VARCHAR2(30 BYTE), 
	"TK_CR_BY" VARCHAR2(40 BYTE), 
	"TK_LINK_TO_TRACKER" VARCHAR2(30 BYTE), 
	"TK_TARG_VERSION" VARCHAR2(30 BYTE), 
	"TK_ESTIMATION" VARCHAR2(30 BYTE), 
	"TK_COMENTS" VARCHAR2(2000 BYTE), 
	"TK_PARENT" VARCHAR2(20 BYTE),
  constraint taskmain_pk primary key (TK_TABLEID)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
  create sequence taskmain_seq;
  --------------------------------------------------------
--  DDL for Table MATCHEDTASKS
--------------------------------------------------------

  CREATE TABLE "DOFER"."MATCHEDTASKS" 
   (	"MTK_TASKMAINID" number, 
	"MTK_MATCHEDTASKID" number
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS";
--------------------------------------------------------
--  DDL for Table TASKMAIN_TO_USER
--------------------------------------------------------

  CREATE TABLE "DOFER"."TASKMAIN_TO_USER" 
   (	"TK_ID" number, 
	"US_ID" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USER
--------------------------------------------------------

  CREATE TABLE "DOFER"."USER" 
   (	"USER_ID" VARCHAR2(20 BYTE), 
	"USER_NAME" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS";

REM INSERTING into DOFER.USERFORAUTH  
SET DEFINE OFF
INSERT INTO DOFER.USERFORAUTH (USER_ID, USER_LOGIN, USER_PINCODE) VALUES (1, 'supakull', '');
INSERT INTO DOFER.USERFORAUTH (USER_ID, USER_LOGIN, USER_PINCODE) VALUES (2, 'user1', '1234');
REM INSERTING into DOFER.TASKMAIN
SET DEFINE OFF;
rem Insert into DOFER.TASKMAIN (TK_TABLEID,TK_TASKID,TK_SUMMARY,TK_DESCRIPTION,TK_SUB_TYPE,TK_STATUS,TK_PRIORITY,TK_PRODUCT,TK_PROJECT,TK_CR_DATE,TK_CR_BY,TK_LINK_TO_TRACKER,TK_TARG_VERSION,TK_ESTIMATION,TK_COMENTS,TK_PARENT) values ('1','1','xzc','sdv','zczv','sdvsdv','svsdv',null,'sdvsdv','sdvsdv','sddvsdv','sdvcsdv','sdvsv','sdv','adsfdf',null);
rem Insert into DOFER.TASKMAIN (TK_TABLEID,TK_TASKID,TK_SUMMARY,TK_DESCRIPTION,TK_SUB_TYPE,TK_STATUS,TK_PRIORITY,TK_PRODUCT,TK_PROJECT,TK_CR_DATE,TK_CR_BY,TK_LINK_TO_TRACKER,TK_TARG_VERSION,TK_ESTIMATION,TK_COMENTS,TK_PARENT) values ('2','2','adsc','hdgsvc','hdvh','shvyhdshg','udhvsyusdhv','uhdvuhdsv','udhvuysdhv','hdvhsdvh','hdvhhshv','hduvhshv','hdhvudshv','duhvush','ssduhvushv','1');
REM INSERTING into DOFER.MATCHEDTASKS
SET DEFINE OFF;
rem Insert into DOFER.MATCHEDTASKS (MTK_TASKMAINID,MTK_MATCHEDTASKID) values ('1','2');
rem Insert into DOFER.MATCHEDTASKS (MTK_TASKMAINID,MTK_MATCHEDTASKID) values ('2','1');
REM INSERTING into DOFER.TASKMAIN_TO_USER
SET DEFINE OFF;
rem Insert into DOFER.TASKMAIN_TO_USER (TK_ID,US_ID) values ('1','2');
rem Insert into DOFER.TASKMAIN_TO_USER (TK_ID,US_ID) values ('2','1');
REM INSERTING into DOFER.USER
SET DEFINE OFF;
Insert into "DOFER"."USER" (USER_ID,USER_NAME) values ('1','hsbvh');
Insert into "DOFER"."USER" (USER_ID,USER_NAME) values ('2','sgnjsf');
--------------------------------------------------------
--  DDL for Index ISSUE_GLOBAL_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "DOFER"."ISSUE_GLOBAL_PK" ON "DOFER"."TASKMAIN" ("TK_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index USER_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "DOFER"."USER_PK" ON "DOFER"."USER" ("USER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index USERS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "DOFER"."USERS_PK" ON "DOFER"."USERS_PERSONAL_DATA" ("USER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  Constraints for Table TASKMAIN
--------------------------------------------------------

  ALTER TABLE "DOFER"."TASKMAIN" ADD CONSTRAINT "ISSUE_GLOBAL_PK" PRIMARY KEY ("TK_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "DOFER"."TASKMAIN" MODIFY ("TK_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table TASKMAIN_TO_USER
--------------------------------------------------------

  ALTER TABLE "DOFER"."TASKMAIN_TO_USER" MODIFY ("US_ID" NOT NULL ENABLE);
  ALTER TABLE "DOFER"."TASKMAIN_TO_USER" MODIFY ("TK_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table USER
--------------------------------------------------------

  ALTER TABLE "DOFER"."USER" MODIFY ("USER_ID" NOT NULL ENABLE);
  ALTER TABLE "DOFER"."USER" ADD CONSTRAINT "USER_PK" PRIMARY KEY ("USER_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table TASKMAIN_TO_USER
--------------------------------------------------------

  ALTER TABLE "DOFER"."TASKMAIN_TO_USER" ADD CONSTRAINT "TASKMAIN_TO_USER_FK1" FOREIGN KEY ("TK_ID")
	  REFERENCES "DOFER"."TASKMAIN" ("TK_ID") ENABLE;
  ALTER TABLE "DOFER"."TASKMAIN_TO_USER" ADD CONSTRAINT "TASKMAIN_TO_USER_FK2" FOREIGN KEY ("US_ID")
	  REFERENCES "DOFER"."USER" ("USER_ID") ENABLE;
